!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.previewer={})}(this,function(t){"use strict";function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return t(e={exports:{}},e.exports),e.exports}var i=n(function(t){!function(e){var n,i=Object.prototype,r=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",c=e.regeneratorRuntime;if(c)t.exports=c;else{(c=e.regeneratorRuntime=t.exports).wrap=y;var h="suspendedStart",u="suspendedYield",p="executing",d="completed",f={},m={};m[a]=function(){return this};var v=Object.getPrototypeOf,w=v&&v(v(S([])));w&&w!==i&&r.call(w,a)&&(m=w);var g=k.prototype=b.prototype=Object.create(m);T.prototype=g.constructor=k,k.constructor=T,k[l]=T.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===T||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(g),t},c.awrap=function(t){return{__await:t}},E(_.prototype),_.prototype[s]=function(){return this},c.AsyncIterator=_,c.async=function(t,e,n,i){var r=new _(y(t,e,n,i));return c.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},E(g),g[l]="Generator",g[a]=function(){return this},g.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},c.values=S,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(X),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return s.type="throw",s.arg=t,e.next=i,r&&(e.method="next",e.arg=n),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),X(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;X(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:S(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),f}}}function y(t,e,n,i){var r=e&&e.prototype instanceof b?e:b,o=Object.create(r.prototype),a=new C(i||[]);return o._invoke=function(t,e,n){var i=h;return function(r,o){if(i===p)throw new Error("Generator is already running");if(i===d){if("throw"===r)throw o;return A()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=x(t,e,n);if("normal"===l.type){if(i=n.done?d:u,l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=d,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function b(){}function T(){}function k(){}function E(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function _(t){var e;this._invoke=function(n,i){function o(){return new Promise(function(e,o){!function e(n,i,o,a){var s=x(t[n],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(c).then(function(t){l.value=t,o(l)},a)}a(s.arg)}(n,i,e,o)})}return e=e?e.then(o,o):o()}}function L(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,L(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=x(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function X(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())}),r=function(){return this}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=o&&r.regeneratorRuntime;r.regeneratorRuntime=void 0;var s=i;if(o)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}var l=s,c=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.$=function(t){return"string"==typeof t?document.querySelector(t):t}});e(c);c.$;var h=n(function(t,e){function n(t,e,n){const i="zIndex"===e?n:"number"==typeof n?`${n}px`:n;if(t.style[e]===i)return!1;t.style[e]=i}Object.defineProperty(e,"__esModule",{value:!0}),e.setStyle=n,e.setStyles=function(t,e){Object.keys(e).forEach(i=>{n(t,i,e[i])})}});e(h);h.setStyle,h.setStyles;var u=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});let n=!1;try{const t=Object.defineProperty({},"passive",{get(){n=!0}});window.addEventListener("test",null,t)}catch(t){}function i(){return n}e.isSupportPassive=i,e.default=i});e(u);u.isSupportPassive;var p=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=()=>null,i=!!u.default()&&{passive:!0,capture:!1};function r(t,e,n){"tap"!==e?t.addEventListener(e,n,i):a(t,n)}function o(t,e,n){t.removeEventListener(e,n,i)}function a(t,e){let n=null,i=!1;r(t,"touchstart",()=>{n=Date.now()}),r(t,"touchmove",()=>{i=!0}),r(t,"touchend",function(t){if(i)return i=!1,!1;Date.now()-n<300&&e.call(this,t),n=Date.now()})}e.addEvent=r,e.removeEvent=o,e.addEvents=function(t,e=[],i=n){e.forEach(e=>r(t,e,i))},e.removeEvents=function(t,e=[],i=n){e.forEach(e=>o(t,e,i))},e.onTap=a});e(p);p.addEvent,p.removeEvent,p.addEvents,p.removeEvents,p.onTap;var d=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=["touchstart","touchmove","touchend","touchcancel"];e.getClientXY=function(t){if(-1===n.indexOf(t.type))return{clientX:t.clientX,clientY:t.clientY};const e=t.targetTouches[0]||t.touches[0];return{clientX:e.clientX,clientY:e.clientY}}});e(d);d.getClientXY;var f=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.$=c.$,e.setStyle=h.setStyle,e.setStyles=h.setStyles,e.addEvent=p.addEvent,e.addEvents=p.addEvents,e.removeEvent=p.removeEvent,e.removeEvents=p.removeEvents,e.onTap=p.onTap,e.getClientXY=d.getClientXY});e(f);var m=f.$,v=f.setStyle,w=f.setStyles,g=(f.addEvent,f.addEvents),y=(f.removeEvent,f.removeEvents),x=(f.onTap,f.getClientXY,["touchstart","touchmove","touchend","touchcancel"]);function b(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function T(t,e){var n=function(t,e){var n=b(t)*b(e);if(0===n)return 0;var i=function(t,e){return t.x*e.x+t.y*e.y}(t,e)/n;return i>1&&(i=1),Math.acos(i)}(t,e);return function(t,e){return t.x*e.y-e.x*t.y}(t,e)>0&&(n*=-1),180*n/Math.PI}var k=function(t){this.handlers=[],this.el=t};function E(t,e){var n=new k(t);return n.add(e),n}k.prototype.add=function(t){this.handlers.push(t)},k.prototype.del=function(t){t||(this.handlers=[]);for(var e=this.handlers.length;e>=0;e--)this.handlers[e]===t&&this.handlers.splice(e,1)},k.prototype.dispatch=function(){for(var t=0,e=this.handlers.length;t<e;t++){var n=this.handlers[t];"function"==typeof n&&n.apply(this.el,arguments)}};var _=function(t,e){this.element="string"==typeof t?document.querySelector(t):t,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.element.addEventListener("mousedown",this.start,!1),this.element.addEventListener("mousemove",this.move,!1),this.element.addEventListener("mouseup",this.end,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var n=function(){};this.rotate=E(this.element,e.rotate||n),this.touchStart=E(this.element,e.touchStart||n),this.multipointStart=E(this.element,e.multipointStart||n),this.multipointEnd=E(this.element,e.multipointEnd||n),this.pinch=E(this.element,e.pinch||n),this.swipe=E(this.element,e.swipe||n),this.tap=E(this.element,e.tap||n),this.doubleTap=E(this.element,e.doubleTap||n),this.longTap=E(this.element,e.longTap||n),this.singleTap=E(this.element,e.singleTap||n),this.pressMove=E(this.element,e.pressMove||n),this.twoFingerPressMove=E(this.element,e.twoFingerPressMove||n),this.touchMove=E(this.element,e.touchMove||n),this.touchEnd=E(this.element,e.touchEnd||n),this.touchCancel=E(this.element,e.touchCancel||n),this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.moving=!1,this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}};_.prototype={start:function(t){if(!this.moving){this.moving=!0;var e=t.targetTouches||t.touches;if(-1===x.indexOf(event.type)&&(e=[t]),e){this.now=Date.now(),this.x1=e[0].pageX,this.y1=e[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(t,this.element),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var n=this.preV;if(e.length>1){this._cancelLongTap(),this._cancelSingleTap();var i={x:e[1].pageX-this.x1,y:e[1].pageY-this.y1};n.x=i.x,n.y=i.y,this.pinchStartLen=b(n),this.multipointStart.dispatch(t,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(t,this.element),this._preventTap=!0}.bind(this),750)}}},move:function(t){if(this.moving){var e=t.targetTouches||t.touches;if(-1===x.indexOf(event.type)&&(e=[t]),e){var n=this.preV,i=e.length,r=e[0].pageX,o=e[0].pageY;if(this.isDoubleTap=!1,i>1){var a=e[1].pageX,s=e[1].pageY,l={x:e[1].pageX-r,y:e[1].pageY-o};null!==n.x&&(this.pinchStartLen>0&&(t.zoom=b(l)/this.pinchStartLen,this.pinch.dispatch(t,this.element)),t.angle=T(l,n),this.rotate.dispatch(t,this.element)),n.x=l.x,n.y=l.y,null!==this.x2&&null!==this.sx2?(t.deltaX=(r-this.x2+a-this.sx2)/2,t.deltaY=(o-this.y2+s-this.sy2)/2):(t.deltaX=0,t.deltaY=0),this.twoFingerPressMove.dispatch(t,this.element),this.sx2=a,this.sy2=s}else{if(null!==this.x2){t.deltaX=r-this.x2,t.deltaY=o-this.y2;var c=Math.abs(this.x1-this.x2),h=Math.abs(this.y1-this.y2);(c>10||h>10)&&(this._preventTap=!0)}else t.deltaX=0,t.deltaY=0;this.pressMove.dispatch(t,this.element)}this.touchMove.dispatch(t,this.element),this._cancelLongTap(),this.x2=r,this.y2=o,i>1&&t.preventDefault()}}},end:function(t){if(this.moving){this.moving=!1;var e=t.targetTouches||t.touches,n=t.changedTouches;if(-1===x.indexOf(event.type)&&(e=[t],n=[t]),n){this._cancelLongTap();var i=this;e.length<2&&(this.multipointEnd.dispatch(t,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(t.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout(function(){i.swipe.dispatch(t,i.element)},0)):(this.tapTimeout=setTimeout(function(){i._preventTap||i.tap.dispatch(t,i.element),i.isDoubleTap&&(i.doubleTap.dispatch(t,i.element),i.isDoubleTap=!1)},0),i.isDoubleTap||(i.singleTapTimeout=setTimeout(function(){i.singleTap.dispatch(t,i.element)},250))),this.touchEnd.dispatch(t,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},cancelAll:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)},cancel:function(t){this.cancelAll(),this.touchCancel.dispatch(t,this.element)},_cancelLongTap:function(){clearTimeout(this.longTapTimeout)},_cancelSingleTap:function(){clearTimeout(this.singleTapTimeout)},_swipeDirection:function(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"},on:function(t,e){this[t]&&this[t].add(e)},off:function(t,e){this[t]&&this[t].del(e)},destroy:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.element.removeEventListener("mousedown",this.start),this.element.removeEventListener("mousemove",this.move),this.element.removeEventListener("mouseup",this.end),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}};var L=function(t,e,n,i,r,o,a,s,l,c,h,u,p,d,f,m){this.elements=window.Float32Array?new Float32Array(16):[];var v=this.elements;v[0]=void 0!==t?t:1,v[4]=e||0,v[8]=n||0,v[12]=i||0,v[1]=r||0,v[5]=void 0!==o?o:1,v[9]=a||0,v[13]=s||0,v[2]=l||0,v[6]=c||0,v[10]=void 0!==h?h:1,v[14]=u||0,v[3]=p||0,v[7]=d||0,v[11]=f||0,v[15]=void 0!==m?m:1};function M(t,e,n){for(var i=0,r=e.length;i<r;i++){X(t,e[i],n)}}function X(t,e,n){Object.defineProperty(t,e,{get:function(){return this["__"+e]},set:function(t){t!==this["__"+e]&&(this["__"+e]=t,n())}})}L.DEG_TO_RAD=Math.PI/180,L.prototype={set:function(t,e,n,i,r,o,a,s,l,c,h,u,p,d,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=c,v[10]=h,v[14]=u,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},multiplyMatrices:function(t,e){var n=t.elements,i=this.elements,r=n[0],o=n[4],a=n[8],s=n[12],l=n[1],c=n[5],h=n[9],u=n[13],p=n[2],d=n[6],f=n[10],m=n[14],v=n[3],w=n[7],g=n[11],y=n[15],x=e[0],b=e[1],T=e[2],k=e[3],E=e[4],_=e[5],L=e[6],M=e[7],X=e[8],C=e[9],S=e[10],A=e[11],Y=e[12],D=e[13],P=e[14],O=e[15];return i[0]=r*x+o*E+a*X+s*Y,i[4]=r*b+o*_+a*C+s*D,i[8]=r*T+o*L+a*S+s*P,i[12]=r*k+o*M+a*A+s*O,i[1]=l*x+c*E+h*X+u*Y,i[5]=l*b+c*_+h*C+u*D,i[9]=l*T+c*L+h*S+u*P,i[13]=l*k+c*M+h*A+u*O,i[2]=p*x+d*E+f*X+m*Y,i[6]=p*b+d*_+f*C+m*D,i[10]=p*T+d*L+f*S+m*P,i[14]=p*k+d*M+f*A+m*O,i[3]=v*x+w*E+g*X+y*Y,i[7]=v*b+w*_+g*C+y*D,i[11]=v*T+w*L+g*S+y*P,i[15]=v*k+w*M+g*A+y*O,this},_rounded:function(t,e){return e=Math.pow(10,e||15),Math.round(t*e)/e},appendTransform:function(t,e,n,i,r,o,a,s,l,c,h,u,p,d){var f=a*L.DEG_TO_RAD,m=this._rounded(Math.cos(f)),v=this._rounded(Math.sin(f)),w=s*L.DEG_TO_RAD,g=this._rounded(Math.cos(w)),y=this._rounded(Math.sin(w)),x=l*L.DEG_TO_RAD,b=this._rounded(Math.cos(-1*x)),T=this._rounded(Math.sin(-1*x));return this.multiplyMatrices(this,[1,0,0,t,0,m,v,e,0,-v,m,n,0,0,0,1]),this.multiplyMatrices(this,[g,0,y,0,0,1,0,0,-y,0,g,0,0,0,0,1]),this.multiplyMatrices(this,[b*i,T*r,0,0,-T*i,b*r,0,0,0,0,1*o,0,0,0,0,1]),(c||h)&&this.multiplyMatrices(this,[this._rounded(Math.cos(c*L.DEG_TO_RAD)),this._rounded(Math.sin(c*L.DEG_TO_RAD)),0,0,-1*this._rounded(Math.sin(h*L.DEG_TO_RAD)),this._rounded(Math.cos(h*L.DEG_TO_RAD)),0,0,0,0,1,0,0,0,0,1]),(u||p||d)&&(this.elements[12]-=u*this.elements[0]+p*this.elements[4]+d*this.elements[8],this.elements[13]-=u*this.elements[1]+p*this.elements[5]+d*this.elements[9],this.elements[14]-=u*this.elements[2]+p*this.elements[6]+d*this.elements[10]),this}};var C=function(t,e){M(t,["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY","originX","originY","originZ"],function(){var n=t.matrix3D.identity().appendTransform(t.translateX,t.translateY,t.translateZ,t.scaleX,t.scaleY,t.scaleZ,t.rotateX,t.rotateY,t.rotateZ,t.skewX,t.skewY,t.originX,t.originY,t.originZ);t.style.transform=t.style.msTransform=t.style.OTransform=t.style.MozTransform=t.style.webkitTransform=(e?"":"perspective("+(void 0===t.perspective?500:t.perspective)+"px) ")+"matrix3d("+Array.prototype.slice.call(n.elements).join(",")+")"}),t.matrix3D=new L,e||(M(t,["perspective"],function(){t.style.transform=t.style.msTransform=t.style.OTransform=t.style.MozTransform=t.style.webkitTransform="perspective("+t.perspective+"px) matrix3d("+Array.prototype.slice.call(t.matrix3D.elements).join(",")+")"}),t.perspective=500),t.scaleX=t.scaleY=t.scaleZ=1,t.translateX=t.translateY=t.translateZ=t.rotateX=t.rotateY=t.rotateZ=t.skewX=t.skewY=t.originX=t.originY=t.originZ=0};!function(){for(var t=0,e=["webkit","moz"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),r=window.setTimeout(function(){e(n+i)},i);return t=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var S=function t(e,n,i,r,o,a,s){var l=e[n],c=i-l,h=new Date,u=this,p=o||function(t){return t};this.tickID=null;!function t(){var o=new Date-h;if(o>=r)return e[n]=i,s&&s(i),a&&a(i),cancelAnimationFrame(u.tickID),void(u.toTick=null);e[n]=c*p(o/r)+l,u.tickID=requestAnimationFrame(t),s&&s(e[n])}(),t.List.push(this)};function A(t){return t.width>=t.height?{auto:"height",max:"width"}:{auto:"width",max:"height"}}function Y(t){return Math.sqrt(1-Math.pow(t-1,2))}S.List=[],S.stopAll=function(){for(var t=0,e=S.List.length;t<e;t++)cancelAnimationFrame(S.List[t].tickID);S.List.length=0},S.stop=function(t){cancelAnimationFrame(t.tickID)},S.reset=function(t,e,n){t[e]=n};var D=function(){var t=document.createElement("div");return t.innerHTML='\n<style>\n.zcorky-loading-container {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate3d(-50%, -50%, 0);\n  z-index: -10;\n}\n.zcorky-wrapper {\n  width: 50px;\n  height: 50px;\n}\n\n.rotate {\n  animation: zcorky-rotate 1s linear infinite;\n}\n\n@keyframes zcorky-rotate {\n  to {\n    transform: rotate(1turn);\n  }\n}\n</style>\n<svg class="zcorky-wrapper" viewBox="-25 -25 50 50">\n  <circle cx="0" cy="0" r="20" stroke="#f0f0f0" fill="none" stroke-width="3px" style="opacity: 0.4"></circle>\n  <circle cx="0" cy="0" r="20" stroke="#f0f0f0" fill="none" stroke-width="3px" stroke-dasharray="20 150" class="rotate"></circle>\n</svg>\n',t.classList.add("zcorky-loading-container"),t};var P,O,z=(P=l.mark(function t(e,n){var i,r,o,a,s,c,h,u;return l.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=(i=n||{}).filename||+new Date,o=i.method||"GET",a=i.headers||{},s=i.body||void 0,t.next=7,fetch(e,{method:o,headers:a,body:s}).then(function(t){return t.blob()});case 7:c=t.sent,h=window.URL.createObjectURL(c),(u=document.createElement("a")).style.display="none",u.href=h,u.download=r,document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(h),document.body.removeChild(u);case 17:case"end":return t.stop()}},t,this)}),O=function(){var t=P.apply(this,arguments);return new Promise(function(e,n){return function i(r,o){try{var a=t[r](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});e(s)}("next")})},function(t,e){return O.apply(this,arguments)}),$=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I=5,F=.1,R=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.previewing=!1,this.lastPreviewedAt=null,this.urls=[],this.stepCurrent=1,this.allSteps=1,this.getElement=function(t){return m(t)},this.getOriginElement=function(t){return m('img[src="'+t+'"]')||m('img[data-src="'+t+'"]')||m('img[data-hd="'+t+'"]')},this.getSource=function(t){return t.src||t.getAttribute("data-src")||t.getAttribute("data-hd")},this.getContainer=function(){var t="data-preview-container",n=m('div[data-preview-container="true"]');if(n)return{$box:e.$container,$image:e.$imageContainer,$mask:e.$maskContainer,$loading:e.$loading};(n=e.$container=document.createElement("div")).className="previewer",n.setAttribute(t,"true"),w(n,{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e8,backgroundColor:"#000",overflow:"hidden",animation:"easeshow .25s",display:"flex",justifyContent:"center",alignItems:"center",transition:"all .3s"});var i=document.createElement("style");i.innerHTML="\n      @keyframes easeshow {\n        0% {\n          opacity: 0;\n        }\n\n        100% {\n          opacity: 1;\n        }\n      }\n      @keyframes easehide {\n        0% {\n          opacity: 1;\n        }\n\n        100% {\n          opacity: 0;\n        }\n      }\n\n      div["+t+'="true"] img {\n        position: relative;\n      }\n\n      div['+t+'="true"] img:after {\n        content: "...";\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate3d(-50%, -50%, 0);\n      }\n\n      .pswp * {\n        box-sizing: border-box;\n      }\n\n      .pswp-toolbar-content {\n        display: flex;\n        align-items: center;\n        background: #252525;\n      }\n\n      .pswp-toolbar-content .group {\n        display: flex;\n        align-items: center;\n        background: #252525;\n        border-radius: 4px;\n        padding: 6px;\n      }\n\n      .pswp .lake-pswp-tool-bar .btn {\n        color: #D9D9D9;\n        display: inline-block;\n        width: 32px;\n        height: 32px;\n        padding: 6px;\n        margin: 0 6px;\n        border: 1px solid #383838;\n        border-radius: 2px;\n        cursor: pointer;\n\n        display: flex;\n        align-items: center;\n      }\n\n      .pswp .lake-pswp-tool-bar .lake-pswp-arrow-left,.lake-pswp-arrow-right {\n        padding: 8px;\n      }\n\n      .pswp .lake-pswp-tool-bar .pswp-toolbar-content .lake-pswp-counter {\n        user-select: none;\n        display: inline-block;\n        font-size: 16px;\n        vertical-align: top;\n        line-height: 34px;\n        color: #DEDEDE;\n        margin: 0 2px;\n        min-width: 37px;\n      }\n\n      .pswp .lake-pswp-tool-bar .separation {\n        width: 1px;\n        margin: 0px 10px;\n        display: inline-block;\n        height: 20px;\n        border: 0.5px solid #383838;\n      }\n\n      .pswp .lake-pswp-tool-bar .btn.disable {\n        background: none;\n      }\n\n      .previewer .icon {\n        width: 1em;\n        height: 1em;\n        vertical-align: -0.15em;\n        fill: currentColor;\n        overflow: hidden;\n      }\n\n      .previewer .close {\n        position: fixed;\n        top: 32px;\n        right: 32px;\n        width: 40px;\n        height: 40px;\n\n        color: #fff;\n        font-size: 20px;\n\n        background-color: #3c3c3c;\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        transition: all .3s;\n\n        opacity: 0;\n\n        border-radius: 2px;\n      }\n\n      .previewer .close:hover {\n        cursor: pointer;\n      }\n\n      .previewer .toolbox {\n        opacity: 0;\n      }\n\n      .previewer:hover .close {\n        opacity: 1;\n      }\n\n      .previewer:hover .toolbox {\n        opacity: 1;\n      }\n\n      // @media (min-width: 1024px) {\n      //   .previewer .close {\n      //     opacity: 1;\n      //   }\n      // }\n\n      @media (max-width: 600px) {\n        .pswp-toolbar-content {\n          background: transparent;\n          flex-flow: column wrap;\n        }\n\n        .pswp-toolbar-content .separation {\n          display: none !important;\n        }\n\n        .pswp-toolbar-content .group {\n          margin-bottom: 6px;\n        }\n      }\n    ',n.prepend(i);var r=document.createElement("div");r.className="previewer-image-container-wrapper",w(r,{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"});var o=e.$imageContainer=document.createElement("img");o.className="previewer-image-container",o.setAttribute("rate",window.innerHeight/window.innerWidth),w(o,{width:"100%",border:"none",cursor:"move"}),e.createAlloyFinger(o),r.appendChild(o),n.appendChild(r);var a=e.$maskContainer=document.createElement("div");a.setAttribute("data-mask","true"),w(a,{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:"-10","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"}),n.prepend(a);var s=e.$loading=D();n.appendChild(s);var l=e.createToolBox();n.appendChild(l);var c=e.createClose();return n.appendChild(c),e.useIconFontCN("//at.alicdn.com/t/font_1508774_y6eqn0d1ta.js"),g(a,["click","tap"],e.togglePreview),document.body.appendChild(n),g(o,["click"],function(t){t.stopPropagation()}),g(m(".previewer .toolbox .lake-pswp-arrow-left"),["click"],e.previewPrevious),g(m(".previewer .toolbox .lake-pswp-arrow-right"),["click"],e.previewNext),g(m(".previewer .lake-pswp-zoom-in"),["click"],e.zoomIn),g(m(".previewer .lake-pswp-zoom-out"),["click"],e.zoomOut),g(m(".previewer .lake-pswp-rotate-left"),["click"],e.rotateLeft),g(m(".previewer .lake-pswp-rotate-right"),["click"],e.rotateRight),g(m(".previewer .lake-pswp-origin-size"),["click"],e.reset),g(m(".previewer .close"),["tap","click"],e.close),{$box:n,$image:o,$mask:a,$loading:s}},this.setUrls=function(t){e.urls=t||[]},this.setSteps=function(t){var n=e.urls,i=n.indexOf(t);if(-1===i)return e.setUrls([t]),e.stepCurrent=1,void(e.allSteps=1);e.stepCurrent=i+1,e.allSteps=n.length},this.createIcon=function(t){return'\n      <svg class="icon" aria-hidden="true">\n        <use xlink:href="#previewer-'+t+'"></use>\n      </svg>\n    '},this.createClose=function(){var t=document.createElement("span")||document.querySelector(".previewer.close");return t.className="close",t.innerHTML=e.createIcon("close"),t},this.createToolBox=function(){var t=document.createElement("div")||document.querySelector(".toolbox.pswp");return t.className="toolbox pswp",t.style="position: fixed; bottom:0;left:50%;transform:translateX(-50%);padding:12px;transition:all .3s;",t.innerHTML='\n      <div class="lake-pswp-tool-bar">\n        <div class="pswp-toolbar-content">\n          <div class="group">\n            <span class="lake-pswp-arrow-left btn default">\n              '+e.createIcon("go-left")+'\n            </span>\n            <span class="lake-pswp-counter">'+e.stepCurrent+" / "+e.allSteps+'</span>\n            <span class="lake-pswp-arrow-right btn default">\n              '+e.createIcon("go-right")+'\n            </span>\n          </div>\n          <span class="separation"></span>\n          <div class="group">\n            <span class="lake-pswp-zoom-in btn default">\n              '+e.createIcon("zoom-in")+'\n            </span>\n            <span class="lake-pswp-zoom-out btn default">\n              '+e.createIcon("zoom-out")+'\n            </span>\n            <span class="lake-pswp-origin-size btn activated">\n              '+e.createIcon("1v1")+'\n            </span>\n            <span class="lake-pswp-rotate-left btn default">\n              '+e.createIcon("rotate-left")+'\n            </span>\n            <span class="lake-pswp-rotate-right btn default">\n              '+e.createIcon("rotate-right")+'\n            </span>\n          </div>\n          \x3c!-- <span class="lake-pswp-best-size btn disable">\n          '+e.createIcon("fullscreen")+"\n        </span> --\x3e\n        </div>\n      </div>\n    ",t},this.updateToolBox=function(){var t=m(".toolbox .lake-pswp-counter");t&&(t.textContent=e.stepCurrent+" / "+e.allSteps)},this.createAlloyFinger=function(t){C(t);var n=1;return new _(t,{singleTap:function(){e.togglePreview()},doubleTap:function(){var n=1;n="width"===A(t).auto?window.innerWidth/t.width:window.innerHeight/t.height,e.zoom(n)},multipointStart:function(){S.stopAll(),n=t.scaleX},multipointEnd:function(){S.stopAll(),t.scaleX<1&&(new S(t,"scaleX",1,500,Y),new S(t,"scaleY",1,500,Y)),t.scaleX>5&&(new S(t,"scaleX",5,500,Y),new S(t,"scaleY",5,500,Y));var e=t.rotateZ%360;e<0&&(e=360+e),t.rotateZ=e,e>0&&e<45?new S(t,"rotateZ",0,500,Y):e>=315?new S(t,"rotateZ",360,500,Y):e>=45&&e<135?new S(t,"rotateZ",90,500,Y):e>=135&&e<225?new S(t,"rotateZ",180,500,Y):e>=225&&e<315&&new S(t,"rotateZ",270,500,Y)},pinch:function(e){t.scaleX=t.scaleY=n*e.zoom},rotate:function(e){t.rotateZ+=e.angle},pressMove:function(n){e.checkBoundary(n.deltaX,n.deltaY)&&(t.translateX+=n.deltaX,t.translateY+=n.deltaY),n.preventDefault()}})},this.loadImage=function(t,e){var n=new Image;n.src=t,n.onload=function(){e(t)}},this.togglePreview=function(t){if(e.lastPreviewedAt&&Date.now()-e.lastPreviewedAt<300)return e.lastPreviewedAt=Date.now(),!1;e.lastPreviewedAt=Date.now(),!e.previewing&&t?(g(window,["keydown"],e.keyboardLeftRight),e.preview(t)):(y(window,["keydown"],e.keyboardLeftRight),e.unpreview())},this.preview=function(t){var n=t||{},i=n.styles,r=n.source,o=n.index,a=void 0===o?0:o,s=r||e.urls[a];if(!s)return alert("No image source provided.");e.previewing=!0;var l=e.getContainer(),c=l.$box,h=l.$image,u=l.$loading;e.bodyScroll.disable(),w(c,{display:"flex"}),h.setAttribute("src","");var p=setTimeout(function(){w(u,{display:"block"})},300);e.setSteps(s),e.updateToolBox(),e.loadImage(s,function(t){if(h.setAttribute("src",t),i)w(h,i);else{var n=e.getOriginElement(s);if(n){var r,o=A(n),a=o.max,l=o.auto;w(h,(j(r={},a,"100%"),j(r,l,"auto"),r))}}p&&(clearTimeout(p),p=null),w(u,{display:"none"})})},this.unpreview=function(){e.previewing=!1;var t=e.getContainer().$box;e.bodyScroll.enable(),e.reset(),w(t,{"animation-name":"easehide"});g(t,["animationend"],function e(){"easehide"===t.style["animation-name"]&&w(t,{display:"none","animation-name":"easeshow"}),y(t,["animationend",e])})},this.previewNext=function(){e.stepCurrent+=1,e.stepCurrent>e.allSteps&&(e.stepCurrent=1);var t=e.stepCurrent-1,n=e.urls[t];e.reset(),e.preview({source:n})},this.previewPrevious=function(){e.stepCurrent-=1,e.stepCurrent<=0&&(e.stepCurrent=e.allSteps);var t=e.stepCurrent-1,n=e.urls[t];e.reset(),e.preview({source:n})},this.zoomIn=function(){var t=e.getContainer().$image;e.zoom(2*t.scaleX)},this.zoomOut=function(){var t=e.getContainer().$image;e.zoom(.5*t.scaleX)},this.rotateLeft=function(){var t=e.getContainer().$image.rotateZ,n=90*Math.ceil(t/90)-90;e.rotate(n)},this.rotateRight=function(){var t=e.getContainer().$image.rotateZ,n=90*Math.ceil(t/90)+90;e.rotate(n)},this.zoom=function(t){var n=e.getContainer().$image;S.stopAll(),n.scaleX>I||n.scaleX<F?(new S(n,"scaleX",1,500,Y),new S(n,"scaleY",1,500,Y),new S(n,"translateX",0,500,Y),new S(n,"translateY",0,500,Y)):(new S(n,"scaleX",t,500,Y),new S(n,"scaleY",t,500,Y),new S(n,"translateX",0,500,Y),new S(n,"translateY",0,500,Y))},this.rotate=function(t){var n=e.getContainer().$image;S.stopAll(),new S(n,"rotateZ",t,500,Y)},this.close=function(){e.unpreview()},this.checkBoundary=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e.getContainer().$image,r=i.scaleX,o=i.translateX,a=i.translateY,s=i.originX,l=i.originY,c=i.width,h=i.height,u=i.getAttribute("rate");if((1!==r||r!==u)&&(o+t<=(r-1)*(c/2+s)+s&&o+t>=-(r-1)*(c/2-s)+s&&a+n<=(r-1)*(h/2+l)+l&&a+n>=-(r-1)*(h/2-l)+l))return!0;return!1},this.reset=function(){var t=e.getContainer().$image;S.stopAll(),1!==t.scaleX||1!==t.scaleY||0!==t.translateX||0!==t.translateY||0!==t.translateZ?(new S(t,"scaleX",1,500,Y),new S(t,"scaleY",1,500,Y),new S(t,"translateX",0,500,Y),new S(t,"translateY",0,500,Y),new S(t,"rotateX",0,500,Y),new S(t,"rotateY",0,500,Y),new S(t,"rotateZ",0,500,Y)):setTimeout(function(){S.reset(t,"scaleX",1),S.reset(t,"scaleY",1),S.reset(t,"translateX",0),S.reset(t,"translateY",0),S.reset(t,"rotateX",0),S.reset(t,"rotateY",0),S.reset(t,"rotateZ",0)},250)},this.render=function(){var t;e.bodyScroll=(t=document.body.style.overflow,{enable:function(){v(document.body,"overflow",t)},disable:function(){v(document.body,"overflow","hidden")}});g(window,["tap","click"],function(t){var n,i=t.target;if(!e.previewable(i))return!1;if(!e.urls||!e.urls.length){var r=Array.prototype.slice.call(document.querySelectorAll('[data-preview="true"]')).map(function(t){return e.getSource(t)});e.setUrls(r)}var o=e.getSource(i),a=A(i),s=a.max,l=a.auto;e.togglePreview({styles:(n={},j(n,s,"100%"),j(n,l,"auto"),n),source:o})})},this.keyboardLeftRight=function(t){var n=t.keyCode;37===n?e.previewPrevious():39===n&&e.previewNext()},this.render()}return $(t,[{key:"previewable",value:function(t){return!!t.hasAttribute("data-preview")&&!!this.getSource(t)}},{key:"setContainerStyles",value:function(t){t&&w(this.$container,t)}},{key:"setImageStyles",value:function(t){t&&w(this.$image,t)}},{key:"useIconFontCN",value:function(t){var e=document.createElement("script");e.src=t,document.head.appendChild(e)}},{key:"download",value:function(){var t,e=(t=l.mark(function t(e){return l.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e.url,e);case 2:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(r,o){try{var a=e[r](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}("next")})});return function(t){return e.apply(this,arguments)}}()}]),t}());t.previewer=R,t.default=R,Object.defineProperty(t,"__esModule",{value:!0})});
